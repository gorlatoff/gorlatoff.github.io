:root {
  /* === PALETTE === */
  --bg-void: hsl(225, 21.5%, 5%);
  --bg-panel: hsl(225, 24%, 8%);
  
  --color-cyan: hsla(190, 90%, 62.5%, 1);
  --color-purple: hsla(260, 85%, 67.5%, 1);
  --color-warm: hsla(35, 100%, 67.5%, 1);
  
  --text-bright: hsl(0, 0%, 100%);
  --text-main: hsl(220, 28.5%, 91%);
  --text-dim: hsl(223, 18.5%, 69%);
  
  --radius-md: 12px;
  --border-base: 1px solid hsla(0, 0%, 100%, 0.065);
  --shadow-panel: 0 15px 40px -7.5px hsla(0, 0%, 0%, 0.6);
  
  --font-ui: 'Space Grotesk', sans-serif;
  --font-mono: 'JetBrains Mono', monospace;
}

/* === RESET & LAYOUT === */
* { box-sizing: border-box; outline: none; }
[v-cloak] { display: none; }

body {
  margin: 0;
  min-height: 100vh;
  background-color: var(--bg-void);
  background-image: radial-gradient(circle at 50% -20%, hsl(225, 25%, 14.5%) 0%, var(--bg-void) 67.5%);
  color: var(--text-main);
  font-family: var(--font-ui);
  overflow: hidden; /* App feel */
  user-select: none;
}

.app-layout {
  display: flex;
  flex-direction: column;
  height: 100vh;
  padding: 10px;
}

.app-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px 10px;
}

.app-title {
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--text-bright);
}

main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: relative;
}

.panel {
  background: var(--bg-panel);
  border: var(--border-base);
  border-radius: 16px;
  box-shadow: var(--shadow-panel);
}

.canvas-panel {
  flex: 1;
  overflow: hidden;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
}

.controls-panel {
  padding: 16px 24px;
  display: flex;
  gap: 32px;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

/* === UI COMPONENTS === */
.btn-icon {
  background: hsla(0, 0%, 0%, 0.25);
  border: var(--border-base);
  color: var(--text-dim);
  padding: 8px 16px;
  border-radius: var(--radius-md);
  cursor: pointer;
  font-family: var(--font-ui);
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 1px;
  transition: all 0.2s;
}
.btn-icon:hover { color: var(--text-bright); border-color: hsla(0,0%,100%,0.2); }

.control-group { display: flex; flex-direction: column; gap: 6px; align-items: center; }
.label { font-size: 10px; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1px; font-weight: 600; }

.toggle-opt {
  display: flex;
  background: hsla(0, 0%, 0%, 0.25);
  padding: 3px;
  border-radius: var(--radius-md);
  border: var(--border-base);
  height: 36px;
  cursor: pointer;
  min-width: 120px;
}
.toggle-opt input { display: none; }
.toggle-face {
  width: 100%; height: 100%;
  display: flex; align-items: center; justify-content: center;
  color: var(--text-dim); font-size: 11.5px; font-weight: 500;
  border-radius: 6px; transition: all 0.2s;
}
.toggle-opt input:checked + .toggle-face {
  background: hsla(0, 0%, 100%, 0.06);
  color: var(--text-bright);
  box-shadow: 0 1px 4px rgba(0,0,0,0.3);
}

.status-text {
  font-family: var(--font-mono);
  font-size: 12px;
  color: var(--text-dim);
}
.status-text.connected { color: var(--color-cyan); text-shadow: 0 0 10px hsla(190, 90%, 62.5%, 0.3); }

/* === SVG STYLES === */
svg { display: block; overflow: visible; }

/* Base elements */
circle { fill: var(--bg-panel); stroke: var(--text-dim); stroke-opacity: 0.3; transition: all 0.1s; }
line { stroke: var(--text-dim); stroke-opacity: 0.2; stroke-width: 1px; transition: all 0.1s; }
polygon { stroke: var(--text-dim); stroke-opacity: 0.2; fill: transparent; transition: all 0.1s; }
text { 
    fill: var(--text-dim); 
    font-family: var(--font-ui); 
    font-size: 14px; 
    pointer-events: none; 
    text-anchor: middle; 
    dominant-baseline: central; 
    font-weight: 500;
}

/* Active / Visited States */
.activeNode circle { stroke: var(--color-bright); stroke-width: 2px; }
.activeNode + text { fill: var(--text-bright); font-weight: 700; }

.activeDichord { stroke: var(--text-main); stroke-opacity: 0.8; stroke-width: 2px; }
.activeTrichord { fill: hsla(260, 85%, 67.5%, 0.15); stroke: var(--color-purple); stroke-opacity: 0.8; }

.visitedNode { fill: hsla(35, 100%, 67.5%, 0.1); }
.visitedTrichord { fill: hsla(35, 100%, 67.5%, 0.1); }

/* Chicken Wire specific */
.chickenTrichord circle { stroke-width: 1; }
.chickenTrichord.minorish text { font-style: italic; opacity: 0.7; }

/* === MODAL === */
.info-overlay {
  position: fixed; inset: 0;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(4px);
  z-index: 100;
  display: flex; justify-content: center; align-items: center;
}
.info-content {
  width: 600px; max-width: 90vw; max-height: 80vh;
  padding: 32px;
  overflow-y: auto;
}
.info-content h2, .info-content p { color: var(--text-main); line-height: 1.6; }
.info-content a { color: var(--color-cyan); text-decoration: none; }

.fade-enter-active, .fade-leave-active { transition: opacity 0.3s; }
.fade-enter, .fade-leave-to { opacity: 0; }

/* Tonnetz Selector Buttons */
.tonnetz-selector {
    display: flex; gap: 8px; justify-content: center; margin-bottom: 20px; flex-wrap: wrap;
}
.btn-select {
    background: transparent; border: var(--border-base); color: var(--text-dim);
    padding: 6px 12px; border-radius: 6px; font-family: var(--font-mono); font-size: 12px;
    cursor: pointer;
}
.btn-select:hover { border-color: var(--text-main); }
.btn-select.active { background: var(--color-purple); color: #fff; border-color: transparent; }
.btn-dual { border-color: var(--color-cyan); color: var(--color-cyan); }
.btn-dual.active { background: var(--color-cyan); color: #000; }

.start-overlay {
    position: fixed; inset: 0; z-index: 999;
    background: rgba(0,0,0,0.8);
    display: flex; justify-content: center; align-items: center;
    cursor: pointer;
}
.start-btn {
    text-align: center; color: white;
    border: 1px solid var(--color-cyan);
    padding: 40px; border-radius: 16px;
    background: radial-gradient(circle, #1a2a3a 0%, #0b0d12 100%);
    box-shadow: 0 0 30px rgba(0,255,255,0.2);
}
.app-layout.blurred { filter: blur(5px); pointer-events: none; }