# О минорной полиладовости

**Часть 1: В поисках новой гармонии**

**(Вступление)**

Музыка – язык  эмоций. Гармония  –  её  грамматика. На  протяжении  веков  композиторы  и  музыканты  исследовали  гармонические  возможности,  стремясь  к  новым,  неизведанным  звучаниям. От  пифагорейской  гармонии  до  сложных  политональных  экспериментов  XX  века  —  поиск  новых  гармонических  языков  всегда  был  движущей  силой  музыкальной  эволюции. Сегодня,  в  эпоху  цифровых  технологий,  у  нас  появились  новые  инструменты  для  этих  поисков.

В  этой  статье  мы  отправимся  в  путешествие  по  неизведанным  гармоническим  ландшафтам,  вооруженные  языком  программирования  Julia  и  вдохновленные  идеями  великих  умов  прошлого,  таких  как  Пифагор,  Риман  и  Эйлер. Наш  путь  будет  лежать  через  мир  обертонов  и  унтертонов,  к  новой  концепции —  *акустической  тонике*,  которая  позволит  нам  создавать  системы  ладов,  одновременно  разнообразных  и  гармонически  связанных.

**(Обертоны и унтертоны:  фундамент  гармонии)**

Каждый  звук,  который  мы  слышим,  —  это  не  просто  одно  колебание,  а  сложный  комплекс  частичных  колебаний,  называемых  *обертонами*. Частоты  обертонов  кратны  основной  частоте  звука  (фундаментальной). Именно  соотношения  частот  обертонов  определяют  тембр  звука,  его  уникальную  "окраску".

*Унтертоны* —  "зеркальное  отражение"  обертонов. Их  частоты  являются  делителями  основной  частоты. Хотя  унтертоны  не  всегда  физически  присутствуют  в  звуке,  они  играют  важную  роль  в  нашем  восприятии  гармонии,  создавая  "скрытую"  гармоническую  структуру.

**(Акустическая  тоника:  новый  взгляд  на  гармонию)**

В  традиционной  музыкальной  теории  *тоника*  —  это  центральная  нота  лада,  к  которой  "тяготеют"  все  остальные  ноты. Мы  же  предлагаем  новый  взгляд  на  это  понятие. *Акустическая  тоника*  —  это  нота,  частота  которой  является  общим  делителем  для  всех  нот  лада. Она  —  фундамент,  на  котором  строится  вся  гармоническая  система. Акустическая  тоника  не  обязательно  должна  быть  слышимой  доминантой,  она  может  быть  "скрытым"  центром,  объединяющим  разнообразные  лады.

Теперь, когда мы заложили основу,  в  следующей  части  перейдем  к  практической  реализации:  генерации  ладов  с  помощью  кода  на Julia.

**Часть 2:  Генерация гармонических ландшафтов**

**(Алгоритм и код)**

Теперь, когда мы познакомились с концепцией акустической тоники, давайте разберемся, как  можно  генерировать  лады,  основанные  на  этом  принципе. Мы  будем  использовать язык программирования Julia,  который  отлично  подходит для  работы  со  звуком и  музыкой  благодаря  своей  производительности и  удобным  библиотекам.

Наш  алгоритм  будет  следующим:

1. **Выбор акустической тоники:** Мы  выбираем  ноту,  которая  будет  служить  акустической  тоникой. В  нашем  примере это  F# (1/45).
2. **Генерация обертонов:**  Мы  генерируем  ряд  обертонов  для  выбранной  тоники.
3. **Умножение на унтертоны:**  Мы умножаем  каждый  обертон на ряд  унтертонов. Это  создает  набор  возможных  интервалов  для  наших  ладов.
4. **Нормализация к октаве:**  Мы  приводим  все  полученные  интервалы  к  диапазону  одной  октавы.
5. **Фильтрация:** Мы отбираем только те интервалы, которые соответствуют определенным критериям благозвучности. В нашем случае мы ограничиваем количество простых множителей 3, 5 и 7 в числителе.
6. **Формирование ладов:** Мы комбинируем  отфильтрованные  интервалы,  формируя  лады.

Вот  реализация  этого  алгоритма  на  Julia:

```julia
using Primes

# Функция для проверки, является ли частотное отношение допустимым
function is_valid_prime_ratio(frequency_ratio::Rational)
    ispow2(denominator(frequency_ratio)) == false && return false 
    prime_factors = Primes.factor(Vector, numerator(frequency_ratio))
    
    is_valid = count(==(3), prime_factors) <= 4 &&   # не более 4-х троек
               count(==(5), prime_factors) <= 2 &&   # не более 2-х пятерок
               count(==(7), prime_factors) <= 1 &&   # не более 1-й семерки
               count( >(7), prime_factors) == 0      # нет простых больше 7
    return is_valid
end

# Функция для нормализации частотного отношения к октаве
function normalize_to_octave(frequency_ratio::Rational)
    frequency_ratio / (2//1)^floor(Int, log2(frequency_ratio))
end

# Акустическая тоника (F#)
const MAX_HARMONIC = 45

# Генерация унтертонов (унтертон ноты это звук, в обертоны которого она входит)
undertone_series = [1//i for i in 1:MAX_HARMONIC]

# Умножение каждого обертона тоники на ряд унтертонов
all_harmonics = [undertone_series * i for i in 1:MAX_HARMONIC]

# Формирование ладов
valid_scales = map(all_harmonics) do harmonic_sequence
    normalized_harmonics = sort!(unique!(map(normalize_to_octave, harmonic_sequence)))
    normalized_harmonics *= MAX_HARMONIC # Приводим все к общей тонике
    return filter(is_valid_prime_ratio, normalized_harmonics)
end

# Фильтрация ладов (больше 2 нот)
undertone_scales = filter(scale -> length(scale) > 2, valid_scales)
undertone_scales = unique!(valid_scales ./ MAX_HARMONIC)

```

**(Преобразование в ноты)**

Для того чтобы  музыкантам  было  удобнее  работать с  полученными  ладами,  мы  можем  преобразовать  частотные  отношения в  ноты.

```julia
# Функция для преобразования частотного отношения в количество полутонов
ratios_to_semitones(x) = Int(round(log(2^(1/12), x)))

# Названия нот
notenames = ["C", "C#", "D", "D#", "E", "F", "F#", "G", "G#", "A", "A#", "B"]
notes = Dict(i => notenames[i] for i in 1:length(notenames))

# Вывод ладов в виде нот
for scale in undertone_scales
    println("$scale") #  Рациональные отношения
    semitones = map(ratios_to_semitones, scale)
    println("$semitones")  #  Полутоны
    notes_in_scale = map(n -> notes[mod(n, 12) + 1], semitones)
    println("$notes_in_scale") # Названия нот
    println("")
end
```

В следующей части мы подробнее рассмотрим полученные лады, сравним их с традиционными и обсудим концепцию унтертоники.

**Часть 3:  Исследование гармонических ландшафтов**

**(Анализ полученных ладов)**

Давайте  теперь  внимательно  рассмотрим  лады,  которые  мы  получили  с  помощью  нашего  кода. Вот  несколько  примеров:

*   `[1, 9//8, 6//5, 4//3, 3//2, 8//5, 9//5] -> ["C", "D", "D#", "F", "G", "G#", "A#"]` -  Натуральный минор. Знакомая  и  любимая  многими  гармоническая  структура.
*   `[1, 21//20, 7//6, 6//5, 21//16, 7//5, 3//2, 14//9, 7//4, 28//15] -> ["C", "C#", "D#", "D#", "F", "F#", "G", "G#", "A#", "B"]` -  Этот  лад  содержит  в  себе  блюзовые  ноты  и  интервалы. Обратите  внимание  на  повторяющуюся  D#.
*    `[1, 9//8, 5//4, 45//32, 3//2, 5//3, 9//5, 15//8] -> ["C", "D", "E", "F#", "G", "A", "A#", "B"]` -  Этот  лад  напоминает  лидийский,  но  с  добавлением  A#. Эта  "лишняя"  нота  создает  интересное  напряжение.
*   `[1, 10//9, 6//5, 5//4, 4//3, 3//2, 5//3, 15//8] -> ["C", "D", "D#", "E", "F", "G", "A", "B"]` -  Почти  мажор,  но  с  D#. Эта  нота  вносит  минорную  окраску  в  мажорную  структуру.

**(Унтертоника: ключ к пониманию)**

Как  мы  видим,  сгенерированные  лады  могут  быть  как  близкими  к  традиционным,  так  и  совершенно  необычными. Ключ  к  пониманию  их  структуры  —  это  *унтертоника*. Унтертоника –  это  обертон  акустической  тоники (в  нашем  случае – F#, 1/45),  от  которого  начинается  построение  лада. Именно  унтертоника  определяет  характерные  интервалы  и  звучание  лада. Мы идем по всем обертонам тоники (...., 5/1, 6/1, 7/1, ....15/1 и так далее), и от каждой из них строим унтертоновую последовательность (с последующей фильтрацией по принадлежности к основной тонике!). Это и отвечает за разнообразие ладов при едином гармоническом центре.

**(Минорная/унтертоновая полиладовость)**

Теперь мы подошли к самому интересному –  *минорная/унтертоновая полиладовость*. Эта концепция  означает,  что  мы  можем  использовать  *несколько*  ладов  с  общей  акустической  тоникой  *одновременно*.

Почему  это  работает?

*   **Общая  акустическая  тоника:**  Все  лады  "привязаны"  к  одной  и  той  же  акустической  тонике (F#),  что  обеспечивает  гармоническое  единство.
*   **Минорная  окраска:**  Унтертоновая  основа  ладов  придает  им  "минорную"  окраску,  что  снижает  риск  конфликта  тоник  и  делает  их  звучание  более  сочетаемым.

**Гармонические  возможности:**

*   **Вертикальная  полиладовость:**  Разные  инструменты  или  голоса  могут  играть  в  разных  ладах  одновременно,  создавая  богатую  и  сложную  гармоническую  текстуру. *Важно:  разделение  ладов  по  инструментам  помогает  избежать  гармонической  "каши".*
*   **Горизонтальная  полиладовость:**  Музыка  может  плавно  или  резко  переходить  от  одного  лада  к  другому,  создавая  драматургическое  развитие.

В  следующей части мы рассмотрим примеры музыкального применения унтертоновой полиладовости, поговорим об импровизации и затронем вопросы музыкальной теории.

**Часть 4:  Музыка в новых измерениях**

**(Музыкальные примеры и перспективы)**

Теперь, когда мы  понимаем  теоретические  основы  унтертоновой  полиладовости,  давайте  поговорим о том,  как  это  можно  применять  на  практике. Представьте  себе  музыкальное  произведение,  где  каждый  инструмент  играет  в  своем  собственном  ладу,  но  все  лады  объединены  общей  акустической  тоникой (F#). 

*   **Пример 1:  Совмещение традиционных ладов в единой гармонии.**  Представим струнный квартет. Первая  скрипка  играет  мелодию  в  натуральном  миноре  (`"C", "D", "D#", "F", "G", "G#", "A#"`),  альт  –  в  ладу,  напоминающем  блюзовый (`"C", "C#", "D#", "D#", "F", "F#", "G", "G#", "A#", "B"`),  виолончель  поддерживает  гармоническую  основу,  играя  арпеджио  на  обертонах  F#,  а  контрабас  держит  педаль  на  самой  F#.

*   **Пример 2: Прямое обыгрывание обертонов тоники.**  Если брать простые лады, такие как 5/5, 5/4, 5/3 (C, E, A) или 9/9, 9/8, 9/6, 9/5 (C, D, G, A#) будет более очевидно, что все ноты одного лада как бы "подвешены" на соответствующем обертоне акустической тоники.

*   **Пример 3: Совмещение традиционной гармонии и полиладовой унтертоновости.** Ноты баса могут быть  в мажорной пентатонике, лидийском ладе или даже мажоре, а вот верхние инструменты в унтертоновых ладах будут прекрасно дополнять их, разрешая использовать практически любую из хроматических нот

* **Пример 4.** Обыгрывание тонких различий натурального строя. Представим, что у нас есть лад от унтертоники 16/1: 16/15, 16/12, 16/9, 16/5 (C F A# G#) и лад от 9/1: 9/9, 9/8, 9/6, 9/5 (C, D, G, A#). Видно, что нота A# совпадает в разных ладах, но в натуральном строе между ними есть тонкое различие в 22 цента. Мало и едва уловимо слухом, но достаточно заметно, если специально играть на контрасте между разными инструментами.

  ```julia
  julia> cents(x) = Int(round( log(2^(1/1200), x)))
  cents (generic function with 1 method)
  
  julia> cents(16/9)
  996
  
  julia> cents(9/5)
  1018
  
  julia> cents(9/5) - cents(16/9)
  22
  ```

  

*   **Пример 3: Электронная музыка.**  Разные  синтезаторы  могут  играть  мелодии  и  гармонии  в  разных  ладах,  создавая  сложные  и  многослойные  звуковые  текстуры. Эффекты  реверберации  и  задержки  могут  еще  больше  "размыть"  границы  между  ладами,  создавая  ощущение  "гармонического  облака".

**(Импровизация:  свобода в рамках гармонии)**

Унтертоновая  полиладовость  открывает  новые  горизонты  для  импровизации. Музыканты  могут  свободно  перемещаться  между  разными  ладами,  не  боясь  потерять  тональный  центр. Общая  акустическая  тоника  служит  своего  рода  "маяком",  который  всегда  поможет  вернуться  "домой".

**(Музыкальная теория: переосмысление основ)**

Концепция  акустической  тоники  бросает  вызов  традиционным  представлениям  о  гармонии. Она  позволяет  нам  переосмыслить  такие  фундаментальные  понятия,  как  тоника,  лад,  гармоническая  функция. Возможно, в будущем  нам  потребуются  новые  системы  музыкальной  нотации,  которые  смогут  адекватно  отобразить  сложные  взаимосвязи  между  звуками  в  унтертоновой  полиладовости.

**(Заключение)**

Мы  лишь  прикоснулись  к  поверхности  нового  музыкального  мира,  открывающегося  благодаря  концепции  акустической  тоники  и  унтертоновой  полиладовости. Впереди  —  множество  неизведанных  гармонических  ландшафтов,  ждущих  своих  исследователей. Этот  подход  может  привести  к  созданию  совершенно  новой  музыки,  которая  расширит  наши  представления  о  гармонии  и  откроет  новые  возможности  для  выражения  эмоций. Присоединяйтесь  к  исследованию!





