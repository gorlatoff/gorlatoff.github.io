<article>
  <title>Magnum Opus: Гармония сфер, переосмысленная</title>

  <section>
    <h1>I. Введение – В поисках утраченной гармонии</h1>
    <p>Друзья мои, музыканты, математики, мечтатели! Давно меня мучает вопрос: отчего музыка,  этот божественный дар,  так часто  скован  рамками  условностей?  Почему  мы, подобно  птицам в клетке темперированного строя,  ограничиваем себя  лишь  двенадцатью  звуками,  когда  вселенная  звука  бесконечна? </p>
    <p>Я предлагаю вам  путешествие  в  мир  гармонии,  основанной не на  догмах,  а на  самой  природе  звука.  Систему,  где  каждая  нота  –  это  не  просто  ступень  на  лестнице,  а  живой  обертон,  часть  великого  гармонического  ряда.  Систему, где  композитор  –  не  узник  нотной  станции,  а  демиург,  ткущий  звуковые  полотна  из  бесконечного  спектра  частот.  Систему,  которая  объединяет  физику  и  математику  с  чистым  творчеством,  открывая  новые  горизонты  музыкального  выражения. И да, эта система свободно интегрируется с любым строем - равномерная темперация, Just Intonation, Пифагоров строй, или что вы там придумаете. Главное - идея, а не её воплощение.</p>

    <subsection>
      <h2>Проблематика существующих строев:</h2>
      <p>Мы  наследовали  музыкальную  систему,  полную  компромиссов. </p>
      <ul>
        <li>Натуральный строй,  с  его  кристально  чистыми  интервалами,  подобен  прекрасной  статуе,  застывшей  в  одной  позе.  Он  не  позволяет  свободно  перемещаться  по  тональностям,  ограничивая  полет  музыкальной  мысли.</li>
        <li>Пифагоров строй,  основанный  на  чистой  квинта,  подобен  звезде  с  пятью  лучами  –  совершенный  в  своей  симметрии,  но  содержащий  в  себе  "волчью  квинту"  –  диссонанс,  нарушающий  гармонию.</li>
        <li>Равномерная  темперация,  наш  современный  стандарт,  –  это  компромисс,  сглаживающий  острые  углы  и  позволяющий  свободно  модулировать.  Но  платой  за  это  стала  потеря  тончайших  нюансов  гармонии,  тех  самых  биений,  которые  делают  звук  живым.  Разве  не  парадокс,  что  малая  септима,  это  и  7/4, и 9/5, и 16/9?  В  темперированном  строе  все  они  сливаются  в  один  звук,  теряя  свою  индивидуальность.</li>
      </ul>
    </subsection>

    <p>Вдохновленный  трудами  великих  –  Евгения  Мурзина,  Сафиаддина  Аль  Урмави,  Римана,  Эйлера  и  многих  других  – я  предлагаю  вам  выйти  за  пределы  этих  ограничений.</p>
  </section>


  <section>
    <h1>II. Физика звука и гармония –  Слушая Вселенную</h1>

    <subsection>
      <h2>Обертоны – голос природы:</h2>
      <p>Возьмите  гитару.  Извлеките  звук.  Теперь  слегка  прикоснитесь  к  струне  на  12-м  ладу.  Чувствуете,  как  меняется  тембр?  Вы  только  что  приглушили  основной  тон,  оставив  звучать  его  первый  обертон  –  октаву.  Повторите  эксперимент  на  7-м  и  19-м  ладах  –  вы  услышите  второй  и  третий  обертоны.  Этот  простой  опыт  открывает  нам  секрет  звука:  он  не  монолитен,  а  состоит  из  множества  гармоник,  вибрирующих  на  частотах,  кратных  основному  тону.  Это  истина,  известная  еще  древним  мастерам  обертонового  пения  и  игры  на  обертоновых  флейтах.</p>
        <image alt="Иллюстрация: разложение звука на составляющие гармоники – спектр, напоминающий горный хребет, где каждый пик соответствует обертону" src="harmonics_waveform.png"></image>
        <iframe src="interactive_oscilloscope.html"></iframe> <comment>Интерактивный осциллоскоп:  рисуйте  свои  волны,  добавляйте  обертоны,  наблюдайте,  как  меняется  форма  звука.  Почувствуйте  себя  скульптором  звука!</comment>
    </subsection>

    <subsection>
      <h2>Рациональные соотношения – математика гармонии:</h2>
      <p>Секрет  консонантности  и  диссонанса  кроется  в  математике.  Музыкальные  интервалы  –  это  не  что  иное,  как  соотношения  частот,  выраженные  дробями.  Октава  –  2/1,  квинта  –  3/2,  терция  –  5/4.  Чем  проще  дробь,  тем  более  консонантен  интервал.  Почему?  Потому  что  у  таких  нот  больше  совпадающих  обертонов,  они  резонируют  друг  с  другом,  создавая  ощущение  гармонического  единства.</p>
      <example>
        <p>Возьмем  ноту  с  частотой  100  Гц.  Ее  обертоны:  100,  200,  **300**,  400,  500,  **600**,  …  Теперь  возьмем  ноту  150  Гц  (3/2  от  100  Гц).  Ее  обертоны:  150,  **300**,  450,  **600**, … Видите  совпадения?  Они  и  создают  магию  квинта.</p>
      </example>
            <p>Даже если вы используете темперированный строй, эта идея работает! Мы просто переносим мышление в Just Intonation.  Мы  можем  найти  общую  тонику  для  любой  группы  нот,  представленных  дробями,  –  это  их  наименьший  общий  знаменатель.</p>
    </subsection>


    <subsection>
      <h2>Консонантность и  диссонанс  –  порядок  и  хаос  в  мире  звука:</h2>
<p>Мы можем оценить благозвучность интервала, посчитав процент совпадающих обертонов: 1/m + 1/n.  Но есть и более сложные методы.</p>
        <image alt="Иллюстрация: совпадающие гармоники двух нот –  круги,  пересекающиеся  в  точках  совпадения" src="overlapping_harmonics.png"></image>
        <iframe src="harmonics_visualizer.html"></iframe> <comment>Визуализатор гармоник:  выбирайте  ноты,  смотрите  их  спектры,  находите  общую  тонику.  Играйте  с  гармониками!</comment>

        <p>Гармоническая  энтропия  –  это  мера  сложности  звука,  его  "информационной  насыщенности".  Высокая  энтропия  соответствует  диссонансу,  низкая  –  консонантности.</p>
        <iframe src="harmonic_entropy_visualizer.html"></iframe> <comment>Визуализатор  гармонической  энтропии:  посмотрите,  как  меняется  энтропия  в  зависимости  от  интервала.</comment>
<image alt="График  субъективной  благозвучности:  кривая,  показывающая,  как  мы  воспринимаем  разные  интервалы.  Сравните  его  с  графиком  гармонической  энтропии!" src="consonance_empirical.png"></image>
    </subsection>
  </section>


  <section>
    <h1>III. Новая  музыкальная  запись  –  освобождая  звук</h1>
    <p>Забудьте  о  пятилинейном  стане!  Я  предлагаю  новую  систему  нотации,  основанную  на  самой  природе  звука  –  спектрограмме.  Высота  –  по  вертикали,  длительность  –  по  горизонтали,  громкость  –  яркость.  Никаких  условностей!  Это  как  смотреть  на  музыку  через  призму  физики.</p><p> А  для  композиторов  –  интерактивные  инструменты:  отображение  отношений  к  тонике,  подсказки  по  гармонии.  Представьте,  как  легко  будет  анализировать  и  создавать  музыку  с  таким  инструментом!</p>
<iframe src="new_notation_demo.html"></iframe> <comment>Демонстрация  новой  нотации:  попробуйте  "нарисовать"  музыку  на  спектрограмме!</comment>
  </section>


  <section>
    <h1>IV. Минорная  унтертоновая  полиладовость  –  гармония  будущего</h1>

    <subsection>
      <h2>Концепция –  многоголосие  единства:</h2>
      <p>Каждый  голос  в  полифонии  может  жить  своей  жизнью,  в  своем  ладу,  независимо  от  других.  Но  как  сохранить  единство?  Ответ  –  общая  тоника.  Представьте  себе  планетарную  систему:  каждая  планета  вращается  по  своей  орбите,  но  все  они  связаны  гравитацией  звезды  –  тоники.  Так  и  в  минорной  унтертоновой  полиладовости:  каждый  голос  имеет  свой  лад,  свою  "унтертонику" –  как  бы  локальный  центр  тяготения, но все они подчиняются общей тонике.</p><p>Унтертоны  –  это  обертоны,  "смотрящие  вниз".  Мы  строим  лады  на  основе  унтертонов  от  верхних  гармоник  тоники,  создавая  богатую  и  сложную  гармоническую  ткань.  Используя  Just Intonation, мы получаем  чистое  звучание,  но  принцип  работает  и  в  темперированном  строе.</p>
    </subsection>

    <subsection>
      <h2>Список ладов  –  алхимия  гармонии:</h2>
      <pre><code>
      # ... (список ладов из предыдущего примера)
      </code></pre>
      <p>Эти лады,  порожденные  программой,  –  как  магические  формулы,  открывающие  двери  в  неизведанные  гармонические  миры.  Они  не  всегда  совпадают  с  привычными  нам  ладами,  но  в  этом  и  их  прелесть!  Они  звучат  свежо,  необычно,  открывая  новые  возможности  для  музыкального  эксперимента. Каждое соотношение в этих ладах можно приблизительно сопоставить интервалам 12-ступенного строя (3/2 ≈ 7 полутонов), что делает их практичными для использования.</p>
 <p>Преимущества очевидны:  мы можем использовать  любую  ноту,  любой  лад,  сохраняя  при  этом  тональную  ясность.  Недостатки?  Возможно,  некоторое  отличие  от  привычных  звучаний,  сложность  восприятия  для  неподготовленного  слушателя. Но разве не  в  этом  задача  искусства  –  расширять  границы  восприятия?</p>
    </subsection>


    <subsection>
      <h2>Программная реализация  –  алгоритмы  гармонии:</h2>
<p>Я  работаю  над  программой,  которая  поможет  композиторам  ориентироваться  в  этом  новом  мире  гармонии.  Она  будет  автоматически  предлагать  лады  для  заданной  тоники,  визуализировать  их  в  новой  нотации  и  даже  генерировать  гармонические  прогрессии. </p>
    </subsection>

  </section>


  <section>
    <h1>V. Исторический  контекст  –  на  плечах  гигантов</h1>

 <p>Мы не первые, кто задумывается о природе гармонии.  История музыки — это история поиска идеального строя, идеального созвучия.</p>
    <subsection>
<h2>Модальность и натуральный строй (Античность):</h2>
<p>Древние греки, арабские мыслители,  они  слышали  музыку  сфер,  видели  в  ней  отражение  космической  гармонии.  Al Urmavi,  персидский  теоретик  музыки,  создал  свои  диаграммы  ладов,  похожие  на  затейливые  орнаменты.  В  них  –  мудрость  веков.</p>
<iframe src="al_urmavi_visualizer.html"></iframe><comment>Визуализатор ладов в стиле Al Urmavi:  погрузитесь  в  мир  модальной  гармонии!</comment>
<p>Натуральный  строй,  основанный  на  чистых  интервалах,  давал  им  не  только  чистоту  звучания,  но  и  выразительность,  которой  лишен  темперированный  строй.  Малая  септима  в  натуральном  строе  может  быть  7/4,  9/5  или  16/9.  Каждая  из  них  несет  свой  эмоциональный  оттенок,  свою  энергетику.</p>
</subsection>


<subsection>
<h2>Пифагоров строй (Средневековье):</h2>
<p>Пифагор,  философ  и  математик,  видел  в  музыке  ключ  к  пониманию  Вселенной.  Он  открыл,  что  гармонические  интервалы  могут  быть  выражены  простыми  математическими  соотношениями.  Кварто-квинтовый  круг  –  его  наследие.  Но  даже  этот  совершенный  круг  имеет  свои  пределы. "Волчья квинта" —  напоминание  о  том,  что  любая  система  имеет  свои  слабые  места.</p>
<iframe src="pythagorean_circle_visualizer.html"></iframe><comment>Интерактивный  кварто-квинтовый  круг:  исследуйте  гармонию  сфер  вместе  с  Пифагором!  Обратите  внимание  на  "волчью  квинту".</comment>
</subsection>

<subsection>
      <h2>Сравнение  строев – в  поисках  золотой  середины:</h2>
      <p>Сравните  Пифагоров  и  натуральный  строй.  Вы  увидите,  что  Пифагоров  строй  –  это  попытка  приблизиться  к  идеалу  натурального  строя  с  помощью  математики.  Но  эта  попытка  не  лишена  недостатков.  Чем  дальше  мы  идем  по  кругу  квинт,  тем  более  сложными  становятся  дроби,  тем  дальше  они  отходят  от  чистых  соотношений  натурального  строя.  </p>
<pre><code class="language-julia">
# ... (код для сравнения строев из предыдущего примера)
</code></pre>
<p>А вот и наглядное  сравнение  нот  в  этих  двух  строях. Разница очевидна!</p>
    </subsection>


    <subsection>
      <h2>Равномерная  темперация  (Новое  время)  –  торжество  компромисса:</h2>
 <p>Tonnetz –  геометрическое  представление  тональных  отношений.  Оно  показывает,  как  тесно  переплетены  звуки  в  темперированном  строе.  Но  эта  теснота  –  и  его  ограничение.  Мы  теряем  чистоту,  выразительность,  нюансы.</p>
      <iframe src="tonnetz_visualizer.html"></iframe> <comment>Интерактивный  Tonnetz:  исследуйте  геометрию  тональности!  Переключайтесь  между  JI  и  темперированным  строем.</comment>
<p>Моя система,  основанная  на  рациональных  отношениях  частот,  позволяет  сохранить  и  чистоту, и выразительность,  и  гибкость.  Мы  можем  использовать  любую  ноту,  любой  интервал,  любой  лад,  оставаясь  в  рамках  единой  гармонической  системы.  Дидимова  комма  –  тончайшее  различие  между  двумя  вариантами  ноты  D  (10/9  и  9/8)  –  становится  не  проблемой,  а  новым  выразительным  средством.  Мы  можем  обыграть  эти  нюансы,  создавая  музыку  невиданной  красоты  и  сложности.</p>
    </subsection>

</section>


  <section>
    <h1>VI.  Эксперименты и  примеры –  от  теории  к  практике</h1>
<p>Давайте  послушаем,  как  звучит  новая  гармония! </p>
    <subsection>
        <h2>Дидимова  комма  в  деле:</h2>

        <audio controls src="didymus_comma_example.mp3"></audio><comment>Пример мелодии,  использующей  дидимову  комму.  Слышите  разницу?</comment>

    </subsection>

    <subsection>
        <h2>Полиладовые  текстуры:</h2>
        <audio controls src="polymodal_example.mp3"></audio> <comment>Пример  звучания  минорной  унтертоновой  полиладовости.  Каждый  голос  в  своем  ладу,  но  все  вместе  создают  гармоническое  целое.</comment>
    </subsection>

    <subsection>
        <h2>Прототип программы –  инструмент  для  композитора:</h2>
<p>Вот  несколько  скриншотов  программы,  которую  я  разрабатываю.  Она  позволяет  экспериментировать  с  ладами,  строить  гармонические  прогрессии  и  визуализировать  музыку  в  новой  нотации.</p>
<image alt="Скриншот  программы:  выбор  ладов  для  заданной  тоники" src="program_screenshot1.png"></image>
<image alt="Скриншот  программы:  визуализация  гармонической  прогрессии" src="program_screenshot2.png"></image>
<pre><code class="language-julia">
# ... (фрагмент кода программы)
</code></pre>
    </subsection>

</section>


  <section>
    <h1>VII.  Заключение  –  новая  эра  гармонии</h1>

    <p>Мы  стоим  на  пороге  новой  эры  в  музыке.  Новая  система  гармонии,  основанная  на  физике  звука  и  математике,  открывает  перед  нами  невиданные  возможности.  Мы  можем  выйти  за  пределы  темперированного  строя,  создавать  музыку  невиданной  сложности  и  красоты,  исследовать  гармонические  миры,  которые  раньше  были  нам  недоступны.  Это  не  просто  новая  система  –  это  новая  философия  музыки,  где  композитор  становится  исследователем,  алхимиком,  демиургом  звука. </p>


    <subsection>
<h2>Мнение GPT-4 (моего верного цифрового помощника):</h2>
<p>Минорная полиладовость ... [вставить  мнение  GPT-4  из  предыдущего  примера,  дополнив  его  своими  комментариями].  Я  полностью  согласен  с  GPT-4  в  том,  что  этот  подход  позволяет  переосмыслить  саму  суть  гармонии.  Мы  перестаем  мыслить  линейно,  в  рамках  одного  лада,  и  начинаем  воспринимать  гармонию  как  многомерное  пространство,  где  каждый  голос,  каждый  лад  –  это  отдельная  вселенная,  связанная  с  другими  невидимыми  нитями  гармонических  резонансов. </p>
    </subsection>
  </section>

<appendix>
<h2>VIII. Приложения</h2>

<subsection>
<h2>Код  программы:</h2>
<pre><code class="language-julia">
# ... (полный  код  программы)
</code></pre>
</subsection>

<subsection>
<h2>Математические  выкладки:</h2>
<p>[Формулы  и  объяснения  расчетов  гармонической  энтропии,  наименьшего  общего  знаменателя  и  т.д.]</p>
</subsection>


<subsection>
<h2>Дополнительные  иллюстрации:</h2>
<p>[Графики,  диаграммы,  схемы,  иллюстрирующие  принципы  новой  системы  гармонии]</p>
</subsection>

</appendix>

</article>


Практическое применение: Вы упомянули о "офигенных возможностях", которые открывает ваша система. Можете привести конкретные примеры того, как композитор может использовать ее в своей работе? Какие новые художественные эффекты можно достичь благодаря минорной унтертоновой полиладовости и новой системе нотации? Например, можно ли добиться необычной динамики развития гармонии или специфического тембра?

Сложности восприятия: Вы отметили, что вычисленные вами лады не совпадают с большинством популярных ладов. Как вы думаете, насколько сложно будет слушателям, привыкшим к традиционной гармонии, воспринимать музыку, написанную в вашей системе? Какие шаги можно предпринять, чтобы сделать ее более доступной для широкой аудитории?

Связь с традиционной теорией: Как ваша система соотносится с существующими музыкальными теориями – например, с функциональной гармонией Римана? Можно ли сказать, что она полностью отвергает традиционные принципы, или скорее развивает и дополняет их?

Технические детали: Вы упомянули программу на Julia. Расскажите подробнее о ее функционале. Какие алгоритмы она использует для генерации ладов и оценки их благозвучности? Планируете ли вы сделать ее доступной для других пользователей?

Ограничения системы: Есть ли какие-либо ограничения у вашей системы? Например, насколько она эффективна для музыки, основанной на темперированном строе? Какие проблемы могут возникнуть при ее практическом применении? Какие у неё недостатки?



## Практические следствия

### Визуальное восприятие
Новая система нотации ближе к физике (громкость = яркость, высота прямо зависит от расстояния, не как в нотах, где между ступенями может быть и тон и полтона), а подписи соотношений помогут понять, какие созвучия будут гармоничны. Например, если мы видим 5/4 и 15/8, то понимаем, что и у числителей есть общие знаменатели, и у знаменателей, значит соотношение чисел довольно простое (3/2, квинта). 
Художественные эффекты - мы делаем необязательной абстракцию отдельной ноты с фиксированной частотой, это не точки на нотном стане и не кирпичики в piano-roll, а это значит, что в новом строе изменения частоты, малые и крупные (вибрато, глиссандо) будут отображаться гораздо естественнее, будучи простыми для изучения, работы и восприятия.

### Влияние на гармоническое мышление
Также мышление в рациональных соотношениях изменяет сам принцип того, как ты думаешь о созвучиях и интервалах. Помнишь, я говорил, что числитель и знаменатель музыкального интервала между нотами говорят, какой обертон одной ноты сливается с каким обертоном другой? (если квинта, то каждый 3-й обертон нижней ноты находится на той же высоте, что и каждый 2-й обертон верхней). Это позволяет легко и непринужденно мыслить об обертонах (например, 4/3 5/3 и 9/3 это обертоны ноты 1/3 (в соотношении к тонике, конечно)) и унтертонах (у унтертонов звука "обратная тоника" находится уже сверху а не снизу). Если мы захотим построить унтертоновый лад от 15/1, в него войдут 3/1, 3/2, 5/1, 5/2 и так далее. Есть много возможных нот, которые содержат данную частоту в качестве обертона, и мы можем видеть их благодаря самой музыкальной записи (видишь, я просто смотрю на кратность/общие множители в числителях и знаменателях).

### Влияние на гармонию
Добиться необычной динамики и гармонии можно, конечно. В самом простом варианте унтертоновой полиладовости у каждого инструмента фиксированный лад, но мы реализуем разделение голосов на кластеры, подчиняющиеся одной гармонии и не конфликтующие друг с другом благодяря унтертоновости/минорности (они не создают конфликтующих акустических тоник). А это позволяет одновременно звучать нотам, которые в теории находятся абсолютно в разных тональностях, не создавая хаоса и конфликтов. 
Дальше нужно сказать про ограничения, общую структуру и соотношение с традиционной тонально гармонией... 

### Связь с традиционной теорией
Смотри, бас/нижние голоса у нас вполне укладываются в мажор (акустическая тоника - F/IV ступень/ 4/3). Более низкие тоны 1/3 1/5 1/15 и так далее **также** будут являться возможной акустической тоникой для этого лада.
C D E F G A H
1 9/8 5/4 4/3 3/2 5/3 15/8

либо арабский лад:
C D E F# G A H
1 16/15 5/4 4/3 3/2 8/5 15/8 (акустическая тоника - C#-16/15 или 1/15 как нота на 4 октавы ниже)

Но ещё у нас могут быть отдельные лады, которые укладываются в эту тонику (каждая нота лада совпадает по высоте с обертонами акустическом тоники). Например:

F# A# D#
7/5 7/4 7/3 (тоника 1/15-C, унтертоника 7/1)

E A H C
5/4 5/3 15/8 5/5 (тоника 1/15-C, унтертоника 15/1)

E A H C
12/12 12/3 12/4 12/5 12/6 .... (тоника 1/15-C, унтертоника 12/1)

Это значит, что мы потенциально можем совмещать классическую тональную логику в некоторых ладах с модальной логикой в других.

Динамика развития гармонии отличается легкостью перехода из одного минорного лада в другой. Это совершенно другой взгляд на модуляцию: мы можем перейти или одновременно использовать лады с разными унтертониками/минорными тониками, это происходит легко и не является настолько же существенным изменением, как классическая модуляция. Но подразумевается, что главную тонику мы менять не планируем, скорее стараемся усилить ощущение тональности для того, чтобы остальная система ладов имела четкий ориентир.


### Сложности восприятия:
Это зависит от. В целом, я не предлагаю использовать какие-то необычные интервалы, даже 7/4 это простая малая септима и не важно, что в натуральном строе она отличается на 30 центов от темперированной септимы.
С другой стороны, нужно провести анализы, посмотреть какие классические лады возможны в моей системе, какие из новых ладов наиболее благозвучны и так далее.
Упомянутое обыгрывание разницы между тождественными в 12-EDO интервалами (16/9-7/4-9/5, либо дидимова комма) требует особых условий, это достаточно медленная музыка с чистыми тембрами, тогда различия становятся достаточно слышны, чтобы можно было строить музыку на них.
Также одновременное использование многих ладов и неоднозначность выбора акустической тоники приводило к тому, что люди не слышали тонику, но в другом, более простом опыте, она вполне читалась.

### Программа на Julia
```
using Primes

function undertones(ratio::Int)
    factor_numer = Primes.factor(Vector, ratio)
    count(==(3), factor_numer) > 4 && return false
    count(==(5), factor_numer) > 2 && return false
    count(==(7), factor_numer) > 1 && return false
    count( >(7), factor_numer) > 0 && return false
    return 1//ratio
end

overtonics = 1:45
series = [undertones(i) for i in 1:45 if undertones(i) != false]

x = [series*i for i in overtonics * 45]

function octaves(ratio::Rational)
    while ratio < 2 
        ratio = ratio * 2
    end
  return ratio
end

using Primes
for i in eachindex(x)
    res = [octaves(ratio) for ratio in x[i]]
    res = unique!(res)
    res = sort!(res)
    res = res * 45
end

x = filter(x -> length(x) > 2, x)
x = x / 45
unique!(x)
```

### Ограничения системы

Музыкальная запись плохо подходит для бумаги и требует, чтобы человек помнил арифметику хотя бы на уровне начальной школы. И есть момент, с которым я мучился больше всего, пытаясь анализировать музыку в этой парадигме: даже в самых простых мелодиях присутствует неоднозначность, когда например вторую ступень, в зависимости от того с чем ты её сравниваешь, одновременно интерпретируется как 10/9 и 9/8. Это существенно ограничивает возможности "верхних", минорных ладов. Но возможно, что теория не обязана работать настолько строго?




* Музыкальный звук это последовательность обертонов, которые идут по гармоническому ряду

* Музыкальные интервалы (даже темперированные!) это соотношения рациональных чисел. Благодаря тому что частоты обертонов кратны основному тону, мы можем видеть, что при разных интервалах у нот совпадают частоты разных гармоник, а у разных интервалов (и даже групп нот!) можно математически вычислить общую тонику.

  Пример:

  Нота 1, 100 гц. Обертоны:

  100, 200, **300**, 400, 500, **600**, 700, 800, **900**, 1000, 1100, **1200**

  Нота 2, 100 гц * 3/2. Обертоны:

  150, **300**, 450, **600**, 750, **900**, 1050, **1200**, 1350

  А их общая нота/тоника это просто наименьшее общее кратное, для дробей оно считается чуть сложнее, чем для простых чисел.

* Соответственно у нас открываются офигенные возможности. Мы можем посчитать процент общих обертонов и оценить консонантность/благозвучность интервала (другие методы - Harmonic Enthropy, eyler gradus function), можем перебрать на компьютере все возможные лады и найти наиболее благозвучные, можем оценивать благозвучность неклассических интервалов самостоятельно (терция - 5/4, терция + октава = 5/4*2= 5/2. Соотношение проще, значит этот интервал консонантнее) или даже находить глазом группы близких нот (например, 5/4, 5/3 и 15/8 (при тонике C это E, A и B) кратны 5). Фактически это система организации, которая требует знания тоники, но не ограничивается только диатоникой, а включает в контекст тональности любую возможную ноту
  C - 1/1
  C# - 16/15
  D - 10/9, 9/8
  E - 5/4
  .....

  Есть и недостатки, одна и та же темперированная нота может относиться к разным соотношениям, а такое мышление одновременно и точнее, и отражает гармоническую неоднозначность живой музыки. Именно поэтому я предлагаю не переход к Just Intonation, а только мышление в нем, строй может оставаться темперированным или любым другим. Но гармония работает именно на рациональных соотношениях чисел.

  С другой стороны, это и открывает путь к новым путям выражения, у меня есть эксперименты, в которых мелодия использует дидимову комму (хотя и 10/9 и 9/8 это нота D, но она может отличаться в высоте и контексте).

* Новые идеи музыкальной записи (через компьютерные интерфейсы, в основном). Можем показывать это как в спектрограмме (ноты это горизонтальные линии), где высота звука отображается по вертикали, продолжительность по горизонтали, а громкость это яркость. Никаких условностей для длительности или тональности, максимальная приближенность к физике. 

  Для помощи композитору можем отображать тонику, при нажатии на ноту отображать отношения других нот к ней и так далее.

* Новая идея организации голосов (полиладовая унтертоновость), основанная на следующих идеях:

  - мелодические линии для каждого инструмента независимы друг от друга, поэтому каждый голос может иметь свой, отдельный музыкальный лад, даже если он не укладывается в классическую минорную или мажорную тональность.

  - однако, необходимо сохранять ощущение тоники для того, чтобы избегать дезориентации и отсутствия "точки отсчета", поэтому лады должны быть минорными и не создавать тональных центров, альтернативных главной гармонии.

  Поэтому мы строим список возможных ладов, которые будут укладываться в единую тонику. Каждый лад там строится как ряд унтертонов, отсчитанных от верхних гармоник акустической тоники (сложный момент), поэтому создается парадоксальная ситуация, когда все звуки всех ладов принадлежат одному тональному центру, но звуки каждого лада имеют свою "унтертонику" (это как тоника во фригийском или локрийском ладу, акустически каждый звук лада включает её в себя). Для акустических рассчетов использую Just Intonation, но та же логика может работать и в равномерной темперации.

  Есть программа на Julia, которая выдает список возможных ладов (каждое соотношение соответствует интервалам 12-ступенного строя, например 3/2 ≈ 7 полутонов):
  
  
11-element Vector{Vector{Rational{Int64}}}: 
  [1, 21//20, 7//6, 6//5, 21//16, 7//5, 3//2, 14//9, 7//4, 28//15]
   [1, 16//15, 6//5, 4//3, 3//2, 8//5, 16//9]
   [1, 16//15, 4//3, 64//45, 8//5, 16//9]
   [1, 35//32, 7//6, 5//4, 7//5, 35//24, 14//9, 5//3, 7//4, 35//18] 
  [1, 10//9, 6//5, 5//4, 4//3, 3//2, 5//3, 15//8]
   [1, 10//9, 5//4, 4//3, 8//5, 5//3, 16//9] 
  [1, 10//9, 5//4, 5//3]
   [1, 9//8, 6//5, 4//3, 3//2, 8//5, 9//5] 
  [1, 9//8, 6//5, 27//20, 3//2, 27//16, 9//5]
   [1, 9//8, 5//4, 45//32, 3//2, 5//3, 9//5, 15//8] 
  [1, 7//6, 56//45, 4//3, 7//5, 14//9, 8//5, 7//4, 28//15]

  
  Пробую этот подход, вижу и недостатки и достоинства. Можно в одной композиции использовать любую ноту, главное отнести её в нужный лад. Можно использовать кучу разных ладов, для низких звуков даже мажор. Все лады звучат вместе хорошо, даже когда используешь много и разных, а тоника слышна.
  
  С другой стороны, высчитанные мною лады не совпадают с большинством популярных ладов. Вроде и оригинальность, и проблемы с повторением созданного. 
  
  И да, я планирую написать прототип программы, которая будет автоматически предлагать тебе возможные с данной тоникой лады и показывать всё это в музыкальной записи, показывающей высоты/продолжительности/громкости, которые зависят от вертикали/горизонтали/яркости и показывает рациональные отношения для каждой ноты.эй

Теоретики, которые работали над похожими вещами: Евгений Мурзин, Сафиаддин Аль Урмави, Риман, Эйлер, люди, связанные с JI.

<оценка>
Тема минорной полиладовости на основе унтертонов открывает богатую, почти неизведанную область гармонии, где можно работать с многослойными, независимыми гармоническими структурами, оставаясь в пределах одного тонального центра. Такой подход не только освежает восприятие минорной гармонии, но и радикально переопределяет роль тоники — она перестаёт быть единственной отправной точкой и превращается в фундаментальный каркас, вокруг которого разворачиваются разные модальные миры.

Мне кажется, эта концепция имеет огромный потенциал именно в том, что она позволяет избавиться от привычного представления о том, что гармония должна быть связана через точные интервальные соответствия к основному тону. Вместо этого создаётся удивительная возможность для полифонии, в которой у каждого голоса есть собственная, независимая модальная логика, а общее единство поддерживается не столько интервалами, сколько самими гармоническими принципами. Это похоже на "глобальную" гармонию, где каждый "регион" (лад или тональный центр) существует на своих основаниях, но все они подчиняются одному глобальному закону.

Если рассматривать минорную полиладовость с точки зрения практического использования, она обещает дать больше свободы композитору и открыть новые, неожиданные сочетания звуков, которые невозможно достичь в традиционных системах. В этом смысле система словно разворачивает пространство гармонии в третьем измерении — не просто как последовательность интервалов, а как комплекс пересекающихся гармонических полей. Технически это может потребовать сложных вычислений и визуализации для композитора, но преимущества могут быть впечатляющими, особенно если создать программное обеспечение, которое позволяет свободно перемещаться по этим "гармоническим регионам" и использовать их для композиции.

На философском уровне мне кажется важным, что эта система предоставляет путь к переосмыслению наших устоявшихся концепций о гармонии как чем-то ограниченном культурными традициями и темперированными системами. Пифагоров строй, например, хорош для определённых мелодий и форм, но его диссонансы на высоких степенях могут вводить ограничения, которые не позволяют выразить всю палитру гармонических возможностей. Темперированный строй тоже предлагает компромиссы, которые полезны для модуляции, но "размывают" чистоту и тонкие различия гармонических соотношений.

Минорная полиладовость на унтертонах же позволяет работать с гибкостью темперированного строя и ясностью, близкой к натуральному, сохраняя при этом логическую строгость соотношений. В этом подходе чувствуется математическая элегантность, которая почти делает её параллельной теории поля в физике: каждый "гармонический регион" управляется собственными законами, но все они объединены одной основой.

На мой взгляд, развивая эту систему, можно прийти к новой философии музыки — такой, где композитор воспринимает гармонию не как жёсткий каркас, а как живое пространство с множеством измерений, в каждом из которых есть свобода, но все они соединены в одном едином гармоническом поле.
</оценка>



<материалы>
# Записки о музыкальной гармонии, часть I

## Звук, гармоники и консонантность

Извлеките из гитарной струны звук и попробуйте приглушить её пальцем в том месте, где струна делится ровно наполовину (12 лад). Всё богатство звуковых красок как будто затихло, оставив один высокий призвук. Если повторить это с делением струны на три (7 и 19 лад), четыре и пять частей, вы услышите, что каждый следующий обертон звучит выше и тише, чем предыдущий.

Подобный трюк можно проделать с любым струнным инструментом, с обертоновой флейтой или даже [с собственным голосом](https://www.youtube.com/watch?v=vC9Qh709gas&t=145s), что служит прямым свидетельством сложного состава музыкальных звуков. Это не простая синусоида, как любят упрощать в популярных объяснениях, а скорее сумма независимых колебаний, подчиняющихся довольно строгому закону. 

[иллюстрация с гармониками как отдельными волнами]

В описанном выше примере, ваш палец не создавал никаких новых колебаний, он просто сработал как фильтр.......

...
Музыкальный звук — это сумма стоячих волн (или гармоник), частоты которых кратны частоте основного тона. 
.....


["Интерактивный пример с осциллоскопом, на котором можно включить разные обертоны с разными формами волны, укладывающимися в основной тон]

......

Если частоты двух нот относятся друг к другу как целые дроби вида m/n, тогда у этих нот будут совпадать определенные гармоники.
Если ноты, которые относятся к тонике как 2/1 (октава) и 3/1 (октава+квинта), находятся между собой на расстоянии 3/1 * 1/2 = 3/2, тогда каждая третья гармоника одной ноты будет совпадать с каждой третьей гармоникой другой ноты, что позволяет найти процент совпадающих гармоник 1/m + 1/n, достаточно хорошо кореллирующий с благозвучностью интервала.

........

[пример с совпаающими гармониками разных нот]

[визуализатор гармоник на спектрограмме. все гармоники кликабельны и звучат, а программа показывает общую тонику для двух звуков]


Также у любых двух нот, которые представлены в виде рациональных отношений чисел, можно найти акустическую тонику, которая рассчитывается как наименьший общий делитель. Для дробей это НОК(m,n)/НОД(m,n). А понятия благозвучности и тоники открывают нам путь к музыкальным ладам.

Прежде чем продолжить, хочу рассказать о более развитой методике определения консонантности под названием [гармоническая энтропия](https://en.xen.wiki/w/Harmonic_entropy). Это довольно сложное понятие, но на....

[тут я сам не понял как она работает и остановился]



Дальше планы:
[интерактивный пример графика Harmonic Entropy]
[очень похожий график с эмпирическим анализом благозвучности интервалов. сначала математически ищем все возможные простые интервалы, которые можно слышать, потом оцениваем благозвучность]


Серия из нескольких программ (все используют общий класс, который объединяет JI названия и частоты, и их традиционные версии):
[Автоматически найденные оптимальные лады в JI. Перебираем все возможные интервалы, потом высчитываем их благозвучность. Такое я уже делал, но надо повторить.]

## Историческая часть

Модальность и натуральный строй. 
[Визуализатор ладов в схемах, похожих на схемы персидского теоретика Al Urmavi. Эпоха античности]
Пишем о преимуществах и недостатках натурального строя, а это не только чистота, но и выразительность/точность. Например, малая септима это одновременно 7/4, 9/5 и 16/9, и эту разницу можно обыгрывать, если найдем способ использовать их одновременно (а мы нашли).

Пифагоров строй и средневековье.
[Визуализатор кварто-квинтового круга и теоремы Пифагора. Показывает, почему круг квинт перестает работать после нескольких шагов. Эпоха средневековья]

### Сравниваем Пифагоров и натуральный строй (первый это приближение ко натуральному):

Функция, которая приводит дроби в диапазон от 1 до 2 домножением на нужную степень двойки.
flatted_value(i) = i / (2//1)^floor(Int, log2(i))
flatted(scale) = [flatted_value(i) for i in scale]

Пифагоров:

pythagor = [(3//2)^i for i in -5:5]

for i in -5:5
  println("3//2^$(i) -> $((3//2)^(i))") 
end

julia> pythagor = flatted(pythagor)
11-element Vector{Rational{Int64}}:
 256//243
 128//81
  32//27
  16//9
   4//3
    1
   3//2
   9//8
  27//16
  81//64
 243//128

Мы видим, что уже с 4 степени двойки начинаются огромные дроби, со сложными соотношениями, которые невозможно распознать на слух

Для сравнения, те же ноты в натуральном строе:

  16/15
  8//5
  6//5
  16//9
  4//3
   1
  3//2
  9//8
  5//3
  5//4
 15//8


[Визуализатор Tonnetz, в JI и темперированном строе. Эпоха нового времени]

Потом я планировал описать свою идею минорной полимодальности и показать прототипы. ]

<для справки>
У меня уже готовы либо находятся в работе следующие картинки и интерактивные примеры:
 
* иллюстрация с гармониками звука
* интерактивный осциллятор с визуализацией гармоник / формы волны
* интерактивный визуализатор гармоник нот в виде спектрограммы, вместе с расчетом общей тоники и взаимной консонантности 
* интерактивный визуализатор гармонической энтропии и сравнение его с графиком * субъективной благозвучности интервалов
* Таблица с анализом благозвучности интервалов
* Анализ благозвучности возможных ладов, тоже таблица.

Эти примеры я интегрирую вместе **в одном интерактивном примере**, также добавлю отображение разных ладов:
* Схемы натуральных ладов в стиле аль-Урмави (просто линейное отображение нот в JI и arc diagram со связями, которые показывают интервалы между ними)
* интерактивный кварто-квинтовый круг с переключением [степени (3/2) / натуральный строй / равномерная темперация
* интерактивный Tonnetz, тоже с переключением режимов

* результаты рассчета ладов для минорной полиладовости
 
* И в финале небольшой инструмент, позволяющий организовать гармонию в минорной/унтертоновой полиладовости.

ВСЕ ОНИ БУДУТ ИНТЕГРИРОВАНЫ В ТЕКСТ ЧЕРЕЗ IFRAME, И РАБОТА ДОЛЖНА СТРОИТЬСЯ ВОКРУГ НИХ
</для справки>
</материалы>